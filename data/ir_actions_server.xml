<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>
    <record model="ir.actions.server" id="change_salesperson">
      <field name="name">[JOS] Assign user_id on change of x_user_id</field>
      <field name="model_id" ref="sale.model_sale_order"/>
      <field name="sequence">5</field>
      <field name="state">code</field>
      <field name="code"><![CDATA[
if len(obj.x_user_id) > 0 and len(obj.user_id) == 0:
  obj['user_id'] = obj.x_user_id.id
        ]]>
      </field>
    </record>
    <record model="base.action.rule" id="auto_change_salesperson">
      <field name="name">[JOS] Assign user_id on change of x_user_id</field>
      <field name="active" eval="True"/>
      <field name="model_id" ref="sale.model_sale_order"/>
      <field name="sequence" eval="2"/>
      <field name="kind">on_write</field>
      <field name="server_action_ids" eval="[(6, 0, [ref('change_salesperson')])]"/>
    </record>
  </data>
</openerp>
